<html xmlns:mso="urn:schemas-microsoft-com:office:office" xmlns:msdt="uuid:C2F41010-65B3-11d1-A29F-00AA00C14882"> 
<head>
<title>IT News Detail</title>

<!--[if gte mso 9]><xml>
<mso:CustomDocumentProperties>
<mso:TemplateHidden msdt:dt="string">0</mso:TemplateHidden>
<mso:ManagedPropertyMapping msdt:dt="string">&#39;NewsSource&#39;{NewsSource}:&#39;owstaxIdNewsSource&#39;,&#39;ListID&#39;{ListID}:&#39;ListID&#39;,&#39;ListItemID&#39;{ListItemID}:&#39;ListItemID&#39;,&#39;Topics&#39;{Topics}:&#39;TopicsOWSTEXT&#39;,&#39;Picture URL&#39;{Picture URL}:&#39;PublishingImage;PictureURL;PictureThumbnailURL;PageImage&#39;,&#39;Title&#39;{Title}:&#39;Title&#39;,&#39;Publisher&#39;{Publisher}:&#39;PublisherOWSTEXT&#39;,&#39;PublishDate&#39;{PublishDate}:&#39;PublishDateOWSDATE&#39;,&#39;NewsDescription&#39;{NewsDescription}:&#39;NewsArticleContentOWSHTML&#39;,&#39;Link URL&#39;{Link URL}:&#39;Path&#39;,&#39;LikesCount&#39;{LikesCount}:&#39;LikesCount&#39;,&#39;SecondaryFileExtension&#39;,&#39;ContentTypeId&#39;</mso:ManagedPropertyMapping>
<mso:MasterPageDescription msdt:dt="string">This Item Display Template will show a detail.</mso:MasterPageDescription>
<mso:ContentTypeId msdt:dt="string">0x0101002039C03B61C64EC4A04F5361F3851066030018889485A320BC48AB971E8317EFC7F8</mso:ContentTypeId>
<mso:TargetControlType msdt:dt="string">;#Content Web Parts;#</mso:TargetControlType>
<mso:HtmlDesignAssociated msdt:dt="string">1</mso:HtmlDesignAssociated>
<mso:CrawlerXSLFile msdt:dt="string"></mso:CrawlerXSLFile>
<mso:HtmlDesignPreviewUrl msdt:dt="string"></mso:HtmlDesignPreviewUrl>
<mso:HtmlDesignConversionSucceeded msdt:dt="string">True</mso:HtmlDesignConversionSucceeded>
<mso:HtmlDesignStatusAndPreview msdt:dt="string">https://microsoft.sharepoint.com/sites/O365COE/_catalogs/masterpage/Display%20Templates/Content%20Web%20Parts/Item_IT_NewsDetail.html, Conversion successful.</mso:HtmlDesignStatusAndPreview>
<mso:FSObjType msdt:dt="string">0</mso:FSObjType>
<mso:ContentType msdt:dt="string">Item Display Template</mso:ContentType>
<mso:FileDirRef msdt:dt="string">teams/ncdp/_catalogs/masterpage/Display Templates/Content Web Parts</mso:FileDirRef>
<mso:FileLeafRef msdt:dt="string">Item_NewsDetail.html</mso:FileLeafRef>
</mso:CustomDocumentProperties>
</xml><![endif]-->
</head>

<body>

    <!--
            Warning: Do not try to add HTML to this section. Only the contents of the first <div>
            inside the <body> tag will be used while executing Display Template code. Any HTML that
            you add to this section will NOT become part of your Display Template.
    -->
    <script>
        $includeLanguageScript(this.url, "~sitecollection/_catalogs/masterpage/Display Templates/Language Files/{Locale}/CustomStrings.js");
    </script>

    <!--
        Use the div below to author your Display Template. Here are some things to keep in mind:
        * Surround any JavaScript logic as shown below using a "pound underscore" (#_ ... _#) token
        inside a comment.

        * Use the values assigned to your variables using an "underscore pound equals"
        (_#= ... =#_) token.
    -->

   	 <div id="MSNewsDetail" class="cbs-newsContainer">

<!--#_

var encodedId = $htmlEncode(ctx.ClientControl.get_nextUniqueId() + "_picture3Lines_");

var linkURL = $getItemValue(ctx, "Link URL");
linkURL.overrideValueRenderer($urlHtmlEncode);

var isLocal = RegExp("^"+_spPageContextInfo.siteAbsoluteUrl,"gi").test(linkURL.value);

var listItemId =  $getItemValue(ctx, "ListItemID");
var listid = $getItemValue(ctx, "ListID");

linkURL = window.location.href;
var commentUrl = window.location.href;
var targetUrl = commentUrl;

var title = $getItemValue(ctx, "Title");

var newssource = $getItemValue(ctx, "NewsSource");
newssource.overrideValueRenderer($contentLineText);

var publisher = $getItemValue(ctx, "Publisher");
var newsPublisher = publisher.value;
if(!publisher.isEmpty)
{
	newsPublisher = "By " + publisher.value;
}

var publishDate = $getItemValue(ctx, "PublishDate");
var articlePublishDate = "";
if(!publishDate.isEmpty)
{
	var convertedMonths = ["Null", "Jan", "Feb", "Mar", "Apr", "May", "Jun", "Jul", "Aug", "Sep", "Oct", "Nov", "Dec"];
	var dates = new Date(publishDate).format("yyyy-MM-dd").split('-'); 	
	articlePublishDate = convertedMonths[+dates[1]] + " " + dates[2] + ", " + dates[0];
}

var likesCount = $getItemValue(ctx, "LikesCount");
if(likesCount.isEmpty)
{
	likesCount = 0;
}

var newsDescription = $getItemValue(ctx, "NewsDescription");
if(newsDescription.isEmpty)
{
	newsDescription.value = "The description field is empty or cannot get the value from search result.";
}


var topics = $getItemValue(ctx, "Topics").value;
var pictureURL = $getItemValue(ctx, "Picture URL");
var pictureId = encodedId + "picture";
var pictureMarkup = Srch.ContentBySearch.getPictureMarkup(pictureURL, 100, 100, ctx.CurrentItem, "cbs-picture3LinesImg", title, pictureId);

title.overrideValueRenderer($contentLineText);

var containerId = encodedId + "container";
var pictureLinkId = encodedId + "pictureLink";
var pictureContainerId = encodedId + "pictureContainer";
var dataContainerId = encodedId + "dataContainer";

var line1LinkId = encodedId + "titleLink";
var line1Id = encodedId + "line1";
var line2Id = encodedId + "line2";
var line3Id = encodedId + "line3";

var dataDisplayTemplateTitle = "ItemPicture3Lines";
itemid = listItemId.value;
var clientid = listid.value + "_" + itemid;

 _#-->
		<div class="article-title">
            <span class="ms-Wrap">
            _#= title =#_
            </span>
		</div>
<!--#_
if(!publisher.isEmpty)
{
_#-->				                
		<div class="article-info ms-noWrap">
	    	<span>
	    	_#= newsPublisher =#_
	    	</span>                	
	    </div><!--#_
}
_#-->	
	    <div class="article-date">                	
			<span>
	    	_#= articlePublishDate =#_
	    	</span>
	    </div>
	    <div class="article-toolbar">
	        <div class="branding"><span>_#= newssource =#_</span></div>
			<!-- SocialToolBar begin -->
			<div class="divSocialToolbarHost divSocialToolbar ms-textSmall ms-noWrap" id="divSocialToolbarHost__#= clientid =#_">
				<input id="_#= clientid =#_" listID="_#= listid =#_" listItemID="_#= itemid =#_" src="_#= commentUrl =#_" title="_#= title =#_" type="hidden" alt="False" value="_#= listid =#_,_#= itemid =#_">
				<ul class="ulSocialToolbarH">
<!--#_
isLocal = true;
if (isLocal)
{
_#-->
					
				<li class="liLike" id="spLike__#= clientid =#_">
					<div class="SocialLike">
					<span id="spLikeIcon__#= clientid =#_" class="sprites Like_ICON"></span>
					<a class="aLike" href="javascript:">
						<span class="spLikeLabel" id="spLikeLabel__#= clientid =#_">Like</span>
					</a>
					<span class="spLikeBraceL" id="spLikeBraceL__#= clientid =#_">(</span>
					<span class="spLikeCount" id="spLikeCount__#= clientid =#_">_#= likesCount =#_</span>
					<span class="spLikeBraceR" id="spLikeBraceR__#= clientid =#_">)</span>
					</div>				
				</li>
<!--#_
}
_#-->
					<div class="social_config_custom" unselectable="on" data-object='{Email:"True",Facebook:"True",Twitter:"False",LinkedIn:"False",Yammer:"True",ShareTarget:".article-title"}'></div>					
					<li class="liShare">
						<a class="SocialToolbar" href="javascript:" id="share__#= clientid =#_">
							<span class="sprites Share_ICON"></span>
							<span class="spShareLabel">Share</span > 
						</a>							
					</li>
					<li class="liComment" style="display:none">
						<a class="aComment" href="_#= targetUrl =#_#comment" target="_blank" id="comment__#= clientid =#_">
							<span class="sprites Comment_ICON"></span>
							<span class="spCommentLabel" id="spCommentLabel__#= clientid =#_">Comment</span>
							<span class="spCommentBraceL" id="spCommentBraceL__#= clientid =#_" style="display: none;"> (</span>
							<span class="spCommentCount" id="spCommentCount__#= clientid =#_" style="display: none;">...</span>
							<span class="spCommentBraceR" id="spCommentBraceR__#= clientid =#_" style="display: none;">)</span>
						</a>
					</li>
				</ul>	
				<img src="about:blank" onerror="if(typeof AddSocialToolbar !== 'undefined') {AddSocialToolbar('_#= clientid =#_')}" style="display:none">														
			</div>								
			<!-- SocialToolBar end -->
		</div>
		<div class="article-body">
			_#= newsDescription.value =#_
		</div>
	</div>       
</body>

</html>
